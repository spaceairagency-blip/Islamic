<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic App - Medina Transition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
    <style>
        /* === THEME VARIABLES === */
        :root {
            --primary: #00d285; --primary-dark: #00b570; --bg: #f8fafc;
            --text-dark: #1e293b; --text-muted: #64748b; --icon-bg: #ebfaf3;
        }
        [data-theme="midnight"] { --primary: #38bdf8; --primary-dark: #0284c7; --icon-bg: #f0f9ff; }
        [data-theme="royal"] { --primary: #a78bfa; --primary-dark: #7c3aed; --icon-bg: #f5f3ff; }
        [data-theme="gold"] { --primary: #facc15; --primary-dark: #ca8a04; --icon-bg: #fefce8; }

        /* === BASE STYLES === */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; transition: background 0.3s ease; }
        body { background: var(--bg); color: var(--text-dark); min-height: 100vh; overflow-x: hidden; }

        /* === MEDINA POP-OUT TRANSITION === */
        #transition-overlay {
            position: fixed; inset: 0; background: rgba(255, 255, 255, 0.95); z-index: 9999;
            display: none; justify-content: center; align-items: center; flex-direction: column;
            backdrop-filter: blur(5px);
        }

        .medina-img {
            width: 180px; height: 180px;
            border-radius: 50%;
            border: 6px solid var(--primary);
            object-fit: cover;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            /* Pop out animation */
            animation: popOut 2.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        .loading-text {
            margin-top: 20px;
            font-weight: 700;
            color: var(--text-dark);
            letter-spacing: 1px;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        @keyframes popOut {
            0% { transform: scale(0); opacity: 0; }
            80% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* === HEADER & MENU === */
        .header-hero {
            background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 25px 20px 100px; color: white; text-align: center; position: relative;
        }
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .theme-dot { width: 18px; height: 18px; border-radius: 50%; border: 2px solid white; cursor: pointer; display: inline-block; margin: 0 4px; }
        #salahName { font-size: 2.8rem; font-weight: 800; text-transform: uppercase; margin-top: 10px; }
        .times-row { display: flex; justify-content: center; gap: 12px; margin-top: 20px; }
        .time-box { background: rgba(255, 255, 255, 0.2); padding: 12px 22px; border-radius: 20px; min-width: 140px; }
        
        .menu-sheet { background: white; margin-top: -45px; border-radius: 45px 45px 0 0; padding: 45px 20px; position: relative; z-index: 10; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px 15px; max-width: 600px; margin: 0 auto; }
        
        .card { text-decoration: none; display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .card i { width: 75px; height: 75px; background: var(--icon-bg); border-radius: 24px; display: flex; align-items: center; justify-content: center; color: var(--primary-dark); font-size: 1.8rem; margin-bottom: 12px; }
        .card h3 { color: var(--text-dark); font-size: 0.8rem; font-weight: 600; text-align: center; }

        /* === MODAL === */
        .modal { position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(10px); display:none; justify-content:center; align-items:center; z-index:2000; }
        .modal-content { background:white; padding:40px 30px; border-radius:32px; width:90%; max-width:400px; text-align:center; }

        footer { text-align: center; padding: 40px; color: var(--text-muted); font-size: 0.8rem; }
    </style>
</head>
<body>

<div id="transition-overlay">
    <img src="https://images.unsplash.com/photo-1591604129939-f1efa4d9f7fa?auto=format&fit=crop&q=80&w=500" alt="Medina" class="medina-img">
    <div class="loading-text">Loading...</div>
</div>

<div class="header-hero">
    <div class="top-bar">
        <div class="theme-selector">
            <div class="theme-dot" style="background:#00d285" onclick="setTheme('emerald')"></div>
            <div class="theme-dot" style="background:#38bdf8" onclick="setTheme('midnight')"></div>
            <div class="theme-dot" style="background:#a78bfa" onclick="setTheme('royal')"></div>
            <div class="theme-dot" style="background:#facc15" onclick="setTheme('gold')"></div>
        </div>
        <div id="hijriDisplay">Loading Date...</div>
    </div>
    <h1 id="salahName">Loading...</h1>
    <p>Current Prayer</p>
    <div class="times-row">
        <div class="time-box"><span>Start</span><br><b id="startTime">--:--</b></div>
        <div class="time-box"><span>End</span><br><b id="endTime">--:--</b></div>
    </div>
</div>

<div class="menu-sheet">
    <div class="grid">
        <a href="99name.html" class="card"><i class="fa-solid fa-star-and-crescent"></i><h3>99 Names</h3></a>
        <div class="card" id="ramadanCard"><i class="fa-solid fa-moon"></i><h3>Ramadan <br>Amals</h3></div>
        <a href="quran.html" class="card"><i class="fa-solid fa-book-quran"></i><h3>Quran</h3></a>
        <a href="weather.html" class="card"><i class="fa-solid fa-trophy"></i><h3>Quiz</h3></a>
        <a href="ramadan.html" class="card"><i class="fa-solid fa-mosque"></i><h3>Ramadan</h3></a>
        <a href="hadith.html" class="card"><i class="fa-solid fa-scroll"></i><h3>Hadith</h3></a>
        <a href="salah-time.html" class="card"><i class="fa-solid fa-clock"></i><h3>Salah Time</h3></a>
        <a href="zakat.html" class="card"><i class="fa-solid fa-hand-holding-dollar"></i><h3>Zakat</h3></a>
        <a href="hajj.html" class="card"><i class="fa-solid fa-kaaba"></i><h3>Hajj & Umrah</h3></a>
        <a href="tasbih.html" class="card"><i class="fa-solid fa-ellipsis-h"></i><h3>Tasbih</h3></a>
        <a href="dua.html" class="card"><i class="fa-solid fa-hands-praying"></i><h3>Dua</h3></a>
        <a href="sunnah.html" class="card"><i class="fa-solid fa-heart"></i><h3>Sunnah</h3></a>
        <a href="names.html" class="card"><i class="fa-solid fa-baby"></i><h3>Baby Names</h3></a>
        <a href="salah.html" class="card"><i class="fa-solid fa-calendar-day"></i><h3>Salah</h3></a>
        <a href="animation.html" class="card"><i class="fa-solid fa-moon-stars"></i><h3>Eid</h3></a>
        <a href="problem.html" class="card"><i class="fa-solid fa-circle-exclamation"></i><h3>Problem?</h3></a>
        <a href="features.html" class="card"><i class="fa-solid fa-arrows-rotate"></i><h3>Features</h3></a>
    </div>
</div>

<div class="modal" id="ramadanModal">
    <div class="modal-content">
        <h2 id="ramadanTitle" style="color:var(--primary-dark)">Ramadan Day</h2>
        <p id="ramadanAmal" style="margin-top:20px; font-size:1.1rem; line-height:1.5;"></p>
        <button onclick="closeModal()" style="margin-top:20px; padding:10px 20px; border:none; border-radius:10px; background:var(--primary); color:white; cursor:pointer;">Close</button>
    </div>
</div>

<footer>© 2026 | MADE BY SAMIYYAN</footer>

<script>
// --- THEME & TRANSITION LOGIC ---
function setTheme(t) {
    document.documentElement.setAttribute('data-theme', t);
    localStorage.setItem('user_theme_pref', t);
}
setTheme(localStorage.getItem('user_theme_pref') || 'emerald');

// New pop-out transition logic
document.querySelectorAll('.card').forEach(card => {
    card.addEventListener('click', function(e) {
        if (this.tagName === 'A') {
            e.preventDefault();
            const destination = this.href;
            const overlay = document.getElementById('transition-overlay');
            
            overlay.style.display = 'flex';
            
            // Wait exactly 1 second (1000ms) before navigating
            setTimeout(() => { 
                window.location.href = destination; 
            }, 1000);
        }
    });
});

// --- PRAYER ENGINE ---
async function initApp() {
    try {
        const res = await fetch('https://api.aladhan.com/v1/timingsByCity?city=Dhaka&country=Bangladesh&method=1');
        const data = (await res.json()).data;
        document.getElementById('hijriDisplay').textContent = `${data.date.hijri.day} ${data.date.hijri.month.en} ${data.date.hijri.year}`;
        updateSalahTime(data.timings);
    } catch(e) { 
        document.getElementById('salahName').innerHTML = "No <br> Internet"; 
    }
}

function updateSalahTime(timings) {
    const now = new Date();
    const currentMin = now.getHours() * 60 + now.getMinutes();
    const prayers = [
        { name: 'Fajr', start: timings.Fajr, end: timings.Sunrise },
        { name: 'Dhuhr', start: timings.Dhuhr, end: timings.Asr },
        { name: 'Asr', start: timings.Asr, end: timings.Maghrib },
        { name: 'Maghrib', start: timings.Maghrib, end: timings.Isha },
        { name: 'Isha', start: timings.Isha, end: 'Midnight' }
    ];
    let current = prayers[prayers.length - 1];
    for (let p of prayers) {
        const [h, m] = p.start.split(':').map(Number);
        if (currentMin >= (h * 60 + m)) current = p;
    }
    document.getElementById('salahName').textContent = current.name;
    document.getElementById('startTime').textContent = current.start;
    document.getElementById('endTime').textContent = current.end;
}

// --- RAMADAN AMALS ---
const amals = [
    "Read Surah Al-Fatiha 5 times with translation.",
    "Recite 'Rabbana atina fid-dunya hasanatan...' 10 times.",
    "Read Surah Al-Ikhlas 20 times.",
    "Recite 'Allahumma innaka 'afuwwun...' 33 times.",
    "Read Surah Al-Baqarah (Ayat 1-20) slowly.",
    "Recite 'Sayyidul Istighfar' once.",
    "Read Surah Al-Kafirun before sleeping.",
    "Recite 'Subhan-Allahi wa bihamdihi' 100 times.",
    "Read Ayatul Kursi after every Salah.",
    "Recite 'Rabbi ighfir li wa tub 'alayya' 100 times.",
    "Read Surah Al-Mulk at night.",
    "Recite 'La ilaha illa anta subhanaka...' 100 times.",
    "Read Surah Ya-Sin.",
    "Recite 'Hasbunallahu wa ni’mal wakil' 33 times.",
    "Read Surah Al-Waqi'ah.",
    "Recite the Dua for your parents.",
    "Read Surah Ar-Rahman.",
    "Recite 'Allahumma ajirni minan-nar' 7 times.",
    "Read the last two verses of Surah Al-Baqarah.",
    "Recite 'Radhitu billahi Rabban...' 3 times.",
    "Read Surah Al-Kahf (Ayat 1-10).",
    "Recite 'Subhan-Allahi wa bi-hamdihi...'",
    "Read Surah Al-Qadr 5 times.",
    "Recite 'La hawla wa la quwwata illa billah' 33 times.",
    "Read Surah Ad-Duha.",
    "Recite 'Bismillahil-ladhi la yadurru...' 3 times.",
    "Read Surah Al-A'la.",
    "Recite 'Allahumma inni as’aluka al-jannah' 3 times.",
    "Read Surah Al-Inshirah 10 times.",
    "Final Day: Read the 3 Quls 10 times each."
];

const ramadanStart = new Date("2026-02-19");
const today = new Date();
const dayDiff = Math.floor((today - ramadanStart) / (1000 * 60 * 60 * 24)) + 1;

document.getElementById('ramadanCard').onclick = () => {
    const modal = document.getElementById('ramadanModal');
    document.getElementById('ramadanTitle').textContent = dayDiff > 0 ? `Ramadan Day ${dayDiff}` : "Coming Soon";
    document.getElementById('ramadanAmal').textContent = dayDiff > 0 ? amals[(dayDiff-1) % 30] : "Prepare for Ramadan 2026!";
    modal.style.display = "flex";
};

function closeModal() { document.getElementById('ramadanModal').style.display = 'none'; }

initApp();
</script>

</body>
</html>
